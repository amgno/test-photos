---
layout: default
title: Photo Portfolio
---

<div class="container">
    <div class="main-content">
        <nav class="sidebar">
            <h1>PHOTOS</h1>
            <ul class="nav-links">
                <li><a href="{{ '/' | relative_url }}" class="active">LIST</a></li>
                <li><a href="{{ '/portfolio' | relative_url }}">PORTFOLIO</a></li>
            </ul>
            <div class="language-switch">
                <a href="{{ page.url }}" class="active">EN</a> / <a href="{{ page.url | replace: '/en/', '/de/' }}">DE</a>
            </div>
        </nav>
        <main class="content">
            <div class="filters">
                <select id="year-filter" onchange="filterWorks()">
                    <option value="">YEAR ▾</option>
                    {% assign image_dirs = site.static_files | where_exp: "file", "file.path contains '/photos/'" %}
                    {% assign years = image_dirs | map: "path" | map: "dirname" | uniq | sort | reverse %}
                    {% for path in years %}
                        {% assign year = path | split: "-" | first | split: "/" | last %}
                        {% if year.size == 4 and year contains "20" %}
                            <option value="{{ year }}">{{ year }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <select id="title-filter" onchange="filterWorks()">
                    <option value="">TITLE ▾</option>
                    {% assign image_dirs = site.static_files | where_exp: "file", "file.path contains '/photos/'" %}
                    {% assign locations = image_dirs | map: "path" | map: "dirname" | uniq | sort %}
                    {% for path in locations %}
                        {% assign parts = path | split: "-" %}
                        {% if parts.size > 1 %}
                            {% assign location = parts[1] | split: "/" | first %}
                            <option value="{{ location }}">{{ location }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div class="works-list">
                {% assign image_dirs = site.static_files | where_exp: "file", "file.path contains '/photos/'" %}
                {% assign unique_dirs = image_dirs | map: "path" | map: "dirname" | uniq | sort | reverse %}
                
                {% for dir in unique_dirs %}
                    {% assign parts = dir | split: "-" %}
                    {% if parts.size > 1 %}
                        {% assign year = parts[0] | split: "/" | last %}
                        {% assign location = parts[1] | split: "/" | first %}
                        {% if year.size == 4 and year contains "20" %}
                            <div class="work-row" onclick="showGallery('{{ dir }}', '{{ location }}', '{{ year }}')">
                                <span class="year">{{ year }}</span>
                                <span class="title">{{ location }}</span>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </main>
    </div>

    <div class="gallery-view">
        <div class="gallery-header">
            <a href="#" class="close-button" onclick="hideGallery(event)">×</a>
        </div>
        <div class="photo-grid">
            <!-- Photos will be loaded here dynamically -->
        </div>
    </div>
</div>

<script>
function filterWorks() {
    const yearFilter = document.getElementById('year-filter').value;
    const titleFilter = document.getElementById('title-filter').value;
    const works = document.querySelectorAll('.work-row');

    works.forEach(work => {
        const year = work.querySelector('.year').textContent;
        const title = work.querySelector('.title').textContent;
        const showYear = !yearFilter || year === yearFilter;
        const showTitle = !titleFilter || title === titleFilter;
        work.style.display = showYear && showTitle ? '' : 'none';
    });
}

function showGallery(dir, location, year) {
    const galleryView = document.querySelector('.gallery-view');
    const photoGrid = galleryView.querySelector('.photo-grid');
    
    // Clear existing photos
    photoGrid.innerHTML = '';
    
    // Get all images in the directory
    {% assign all_images = site.static_files | where_exp: "file", "file.path contains '/photos/'" %}
    const images = [
        {% for image in all_images %}
            {% assign ext = image.path | split: "." | last | downcase %}
            {% if ext == "jpg" or ext == "jpeg" or ext == "png" or ext == "gif" or ext == "webp" %}
                {
                    path: "{{ image.path }}",
                    dir: "{{ image.path | split: '/' | reverse | drop: 1 | reverse | join: '/' }}"
                },
            {% endif %}
        {% endfor %}
    ].filter(img => img.dir === dir);

    // Add photos to the gallery
    images.forEach(image => {
        const photoItem = document.createElement('div');
        photoItem.className = 'photo-item';
        photoItem.innerHTML = `<img src="{{ site.baseurl }}${image.path}" alt="${location}" loading="lazy">`;
        photoGrid.appendChild(photoItem);
    });

    // Show the gallery
    galleryView.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function hideGallery(event) {
    event.preventDefault();
    const galleryView = document.querySelector('.gallery-view');
    galleryView.classList.remove('active');
    document.body.style.overflow = '';
}
</script> 