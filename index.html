---
layout: default
title: Photo Portfolio
---

<div class="container">
    <div class="main-content">
        <nav class="sidebar">
            <h1>PHOTOS</h1>
            <ul class="nav-links">
                <li><a href="#" class="active">LIST</a></li>
                <li><a href="#">PORTFOLIO</a></li>
            </ul>
            <div class="language-switch">
                <a href="#" class="active">EN</a> / <a href="#">DE</a>
            </div>
        </nav>
        <main class="content">
            <div class="filters">
                <select id="year-filter" onchange="filterWorks()">
                    <option value="">YEAR ▾</option>
                </select>
                <select id="title-filter" onchange="filterWorks()">
                    <option value="">TITLE ▾</option>
                </select>
            </div>

            <!-- Debug info -->
            <div class="debug-info" style="margin-bottom: 20px; font-family: monospace; font-size: 12px;">
                <p>Base URL: {{ site.baseurl }}</p>
                <p>Available static files:</p>
                <ul>
                {% for file in site.static_files %}
                    <li>{{ file.path }}</li>
                {% endfor %}
                </ul>
            </div>

            <div class="works-list">
                <!-- First try with simple directory listing -->
                {% assign dirs = site.static_files | map: "path" | group_by_exp: "path", "path | split: '/' | slice: 1, 1 | join: '/'" %}
                {% for dir in dirs %}
                    {% if dir.name contains "-" %}
                        {% assign parts = dir.name | split: "-" %}
                        {% assign year = parts[0] %}
                        {% assign location = parts[1] %}
                        <div class="work-row" onclick="showGallery('{{ dir.name }}')">
                            <span class="year">{{ year }}</span>
                            <span class="title">{{ location }}</span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </main>
    </div>

    <div class="gallery-view">
        <div class="gallery-header">
            <a href="#" class="close-button" onclick="hideGallery(event)">×</a>
        </div>
        <div class="photo-grid"></div>
    </div>
</div>

<script>
// Debug function
function debugInfo(msg) {
    console.log('[Debug]:', msg);
}

function filterWorks() {
    const yearFilter = document.getElementById('year-filter').value;
    const titleFilter = document.getElementById('title-filter').value;
    const works = document.querySelectorAll('.work-row');
    
    debugInfo(`Filtering - Year: ${yearFilter}, Title: ${titleFilter}`);
    debugInfo(`Found ${works.length} work items`);

    works.forEach(work => {
        const year = work.querySelector('.year').textContent;
        const title = work.querySelector('.title').textContent;
        const showYear = !yearFilter || year === yearFilter;
        const showTitle = !titleFilter || title === titleFilter;
        work.style.display = showYear && showTitle ? '' : 'none';
    });
}

function showGallery(dirName) {
    debugInfo(`Opening gallery for directory: ${dirName}`);
    
    const galleryView = document.querySelector('.gallery-view');
    const photoGrid = galleryView.querySelector('.photo-grid');
    
    // Clear existing photos
    photoGrid.innerHTML = '';
    
    // Get all images for this directory
    {% assign all_files = site.static_files | where_exp: "file", "file.path contains '.jpg' or file.path contains '.jpeg' or file.path contains '.png'" %}
    const images = [
        {% for file in all_files %}
        {
            path: "{{ file.path }}",
            directory: "{{ file.path | split: '/' | slice: 1, 1 | join: '/' }}"
        },
        {% endfor %}
    ];
    
    debugInfo(`Found ${images.length} total images`);
    
    const directoryImages = images.filter(img => img.directory === dirName);
    debugInfo(`Found ${directoryImages.length} images for directory ${dirName}`);
    
    // Add photos to the gallery
    directoryImages.forEach(image => {
        const photoItem = document.createElement('div');
        photoItem.className = 'photo-item';
        const imgPath = `{{ site.baseurl }}${image.path}`;
        debugInfo(`Adding image: ${imgPath}`);
        photoItem.innerHTML = `<img src="${imgPath}" loading="lazy">`;
        photoGrid.appendChild(photoItem);
    });

    // Show the gallery
    galleryView.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function hideGallery(event) {
    event.preventDefault();
    debugInfo('Closing gallery');
    const galleryView = document.querySelector('.gallery-view');
    galleryView.classList.remove('active');
    document.body.style.overflow = '';
}

// Initial debug info
document.addEventListener('DOMContentLoaded', () => {
    debugInfo('Page loaded');
    debugInfo(`Base URL: {{ site.baseurl }}`);
    const works = document.querySelectorAll('.work-row');
    debugInfo(`Found ${works.length} work items on load`);
});
</script> 